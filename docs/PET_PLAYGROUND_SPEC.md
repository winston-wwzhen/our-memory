# 🐶 宠物乐园 (Pet Playground) 功能说明书

## 1. 项目背景与目标
* **原功能痛点**：原“玫瑰花园”玩法（纯点击浇水）过于枯燥，缺乏情感投射，用户留存仅靠利益（卡券）驱动，难以维持长线活跃。
* **改版目标**：将“劳动型”玩法升级为“养成型”玩法。通过**随机性**（旅行掉落）和**情感羁绊**（宠物陪伴）提升 DAU 和留存。
* **合规注意**：本项目主体为**个人小程序**，需严格规避“游戏”类目风险。所有文案包装需强调“习惯养成”与“工具属性”，避免出现“服务器”、“战力”、“副本”等游戏专用术语。

## 2. 核心玩法逻辑 (Core Loop)

### 2.1 概念映射 (Legacy Compatibility)
为了确保老用户资产不丢失，我们将底层数据模型与原有“花园”逻辑进行无缝映射：

| 用户界面 (UI) | 底层逻辑 (Backend) | 对应原功能 | 备注 |
| :--- | :--- | :--- | :--- |
| **喂食 (Feed)** | 消耗 `water` (爱意值) | 浇水 | 保持数值不变，每次消耗 10 |
| **心情/能量** | 增加 `growth_value` | 成长值 | 进度条满时触发“旅行” |
| **带回礼物** | 产出 `rose` (玫瑰) | 玫瑰收获 | 依然作为兑换权益券的硬通货 |
| **旅行明信片** | 新增资产 | 无 | 用于收藏与分享 (v2.1+) |

### 2.2 状态机设计 (State Machine)
宠物仅包含以下三种简单状态，降低开发复杂度：

1.  **居家 (Idle/Home)**
    * **表现**：宠物在窝里发呆、睡觉或玩耍。
    * **交互**：用户点击“喂食”按钮，播放进食动画，进度条增加。
    * **逻辑**：当 `growth_value` < `MAX_LIMIT` (300) 时维持此状态。

2.  **旅行中 (Traveling)**
    * **表现**：窝是空的，桌上留有一张**手绘便条**（随机文案）。
    * **触发**：当 `growth_value` 达到 300 (100%) 时自动触发。
    * **逻辑**：v2.0 阶段为“伪旅行”，触发即完成（或仅展示短暂倒计时）；v2.1 阶段引入真实物理时间（如离家 4 小时）。

3.  **归来 (Return/Reward)**
    * **表现**：宠物回到窝里，头顶出现 `!` 气泡。
    * **交互**：点击气泡结算奖励。
    * **产出**：
        * **必得**：1 朵玫瑰。
        * **概率**：旅行明信片（风景照/趣味照）、特产（权益券碎片）。
    * **重置**：领取后，`growth_value` 清零，回到“居家”状态。

## 3. 用户模式 (User Modes)

* **单人模式 (The Watcher)**
    * 适用于未绑定情侣关系的用户。
    * 宠物文案侧重于“陪伴”与“等待”（例如：“我会陪你直到那个人出现”）。
    * 部分商城道具（如双人权益券）显示为**锁定状态**，引导邀请。

* **双人模式 (Co-parenting)**
    * 适用于已绑定情侣。
    * 双方共享宠物的状态（A 喂食后，B 看到进度条也会增加）。
    * **互动**：UI 显示“Ta 刚刚喂过我了”等甜蜜提示。

## 4. 关键功能模块

### A. 喂养系统
* **入口**：原 `pages/playground/index`。
* **操作**：点击饭盆，消耗库存爱意值。
* **反馈**：
    * 成功：播放吃东西 GIF，爱心特效，进度条上涨。
    * 失败（余额不足）：弹窗提示去“每日任务”获取爱意值。

### B. 旅行与惊喜 (Surprise)
* **触发方式**：自动触发，无需二次确认（减少用户操作负担）。
* **便条系统**：宠物离家时随机留下一句话，文案库需包含 20+ 条日常/暖心/搞怪文案。
* **明信片**：
    * **v2.0**：前端内置 10 张通用风景图，随机展示，不保存。
    * **v2.1**：接入相册功能，支持保存到“时光长廊”。

### C. 经济系统
* 保持 `miniprogram/utils/business_rules.json` 中的配置：
    * `WATER_COST`: 10 (每次喂食消耗)
    * `HARVEST_MIN_GROWTH`: 300 (触发旅行阈值)

## 5. 风险控制
* **文案自查**：严禁出现“充值”、“排行榜”、“全服广播”、“战斗力”等词汇。
* **功能开关**：在云端配置 `enable_pet_mode` 开关。若审核不通过，可一键切回旧版“花园” UI。
