# 📅 宠物乐园开发迭代计划 (Dev Roadmap)

> **当前阶段**：v2.0 MVP (最小可行性产品)
> **目标**：在 7 天内完成“花园”到“宠物”的平滑迁移，确保个人主体小程序合规上线。

## 🟢 Phase 1: v2.0 MVP (7-Day Sprint)

**核心策略**：重 UI 轻逻辑，不改数据库结构，不接 AI，快速上线。

| 时间 | 任务模块 | 详细内容 | 涉及文件 |
| :--- | :--- | :--- | :--- |
| **Day 1** | **素材与UI** | 1. 收集宠物素材（正常、进食、空窝3种状态图）。<br>2. 收集 5-10 张风景图（作为旅行明信片）。<br>3. 全局文案替换（浇水->喂食, 花园->小窝）。 | `miniprogram/pages/playground/index.wxml`<br>`miniprogram/pages/playground/index.wxss` |
| **Day 2** | **逻辑映射** | 1. 修改前端逻辑，将植物生长阶段图替换为宠物状态图。<br>2. 进度条样式微调（由垂直/圆形改为水平能量条）。 | `miniprogram/pages/playground/index.js` |
| **Day 3** | **后端适配** | 1. 审查 `garden.js`，确认 `waterFlower` 和 `harvestFlower` 接口逻辑兼容。<br>2. 确保 `business_rules.json` 数值配置正确加载。 | `cloudfunctions/user_center/services/garden.js`<br>`miniprogram/utils/business_rules.json` |
| **Day 4** | **旅行逻辑** | 1. 实现“伪旅行”弹窗逻辑：进度满 -> 弹窗“我出门啦” -> 再次点击 -> 弹窗“带回礼物”。<br>2. 实现“便条”随机文案逻辑。 | `miniprogram/utils/static_content.json` (新增文案库) |
| **Day 5** | **合规自查** | 1. 检查所有页面无游戏类敏感词。<br>2. 确保双人/单人模式下数据展示无 Bug。<br>3. 埋入“功能开关”代码，应对审核风险。 | `miniprogram/app.js` (全局配置) |
| **Day 6** | **测试与提交** | 1. 真机调试，重点测试老用户（有玫瑰库存）的数据是否正常。<br>2. 提交微信审核（类目建议：生活服务-工具）。 | - |
| **Day 7** | **发布与运营** | 1. 正式发布。<br>2. 更新小红书/朋友圈文案：“花园升级啦！” | `README.md` (更新文档) |

---

## 🟡 Phase 2: 真实旅行与图鉴 (Post-Launch v2.1)

**目标**：引入“挂机”机制，增加用户粘性与收集欲。
**预计时间**：上线后 2 周

* [ ] **真实物理时间**：
    * 后端记录 `start_travel_time`。
    * 前端计算时间差，未到时间显示“空窝+便条”。
* [ ] **旅行相册**：
    * 在 `Mine` 页面增加“旅行手账”入口。
    * 将明信片保存到云存储，用户可查看历史记录。
* [ ] **随机掉落优化**：
    * 增加“特产”掉落（如权益券碎片），丰富奖励池。

---

## 🔵 Phase 3: AI 接入与个性化 (Long-term v2.2)

**目标**：利用 AI 制造差异化惊喜，消耗积分。
**预计时间**：上线后 1-2 个月

* [ ] **接入 `process_anime`**：
    * 实现云函数调用腾讯云 AI 绘画接口。
    * 根据宠物等级/旅行次数，生成 unique 的明信片。
* [ ] **VIP 特权**：
    * VIP 用户解锁“世界名胜”旅行地点。
    * VIP 用户生成高清无水印大图。
