/* miniprogram/pages/history/index.wxss */
page {
  background: #fdfbf7; /* æš–ç±³è‰²èƒŒæ™¯ */
  padding-bottom: 40rpx;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

.history-container {
  padding: 40rpx;
}

.timeline-header {
  margin-bottom: 50rpx;
}

.title {
  font-size: 48rpx;
  font-weight: 800;
  color: #5d4037;
  display: block;
  margin-bottom: 8rpx;
  letter-spacing: 1rpx;
}

.subtitle {
  font-size: 26rpx;
  color: #a1887f;
  text-transform: uppercase;
  letter-spacing: 3rpx;
  display: block;
  opacity: 0.8;
}

/* === Surprise Banner (ä¿æŒä¸å˜) === */
.surprise-banner {
  margin-top: 36rpx;
  background: linear-gradient(135deg, #fff1f0 0%, #fffbf0 100%);
  border: none;
  border-radius: 24rpx;
  padding: 28rpx 24rpx;
  display: flex;
  align-items: center;
  box-shadow: 0 12rpx 28rpx rgba(255, 183, 178, 0.15), 0 2rpx 6rpx rgba(255, 183, 178, 0.05);
  transition: all 0.2s ease;
}

.surprise-banner:active {
  transform: scale(0.98);
  box-shadow: 0 6rpx 16rpx rgba(255, 183, 178, 0.12);
}

.gift-box {
  width: 88rpx;
  height: 88rpx;
  background: #ffffff;
  box-shadow: 0 4rpx 12rpx rgba(255, 183, 178, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 20rpx;
  flex-shrink: 0;
}

.gift-icon {
  font-size: 44rpx;
  animation: bounce 2s infinite ease-in-out;
}

.gift-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1;
  overflow: hidden; 
}

.gift-title {
  font-size: 30rpx;
  color: #5d4037;
  font-weight: 700;
  margin-bottom: 8rpx;
  display: flex;
  align-items: center;
}

.days-highlight {
  color: #ff6b81;
  font-size: 34rpx;
  font-family: 'Courier New', monospace;
  font-weight: 800;
  margin: 0 6rpx;
}

.rule-icon {
  font-size: 20rpx;
  margin-left: 12rpx;
  background: #ffb7b2;
  color: #fff;
  width: 28rpx;
  height: 28rpx;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  box-shadow: 0 2rpx 4rpx rgba(255, 183, 178, 0.3);
}

.gift-desc {
  font-size: 24rpx;
  color: #8d6e63;
  line-height: 1.4;
  white-space: nowrap; 
  overflow: hidden;
  text-overflow: ellipsis;
}

.days-left {
  color: #ff6b81;
  font-weight: bold;
  margin: 0 4rpx;
  font-size: 26rpx;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-8rpx) scale(1.05); }
}

/* === æ—¶é—´è½´å¸ƒå±€ === */
.timeline-content {
  position: relative;
  margin-top: 20rpx;
}

.timeline-item {
  display: flex;
  margin-bottom: 48rpx;
}

.time-node {
  margin-right: 32rpx;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ğŸŸ¢ [ä¼˜åŒ–] åœ†ç‚¹æ ·å¼ï¼Œå¢åŠ å‘¼å¸æ•ˆæœå’Œè´¨æ„Ÿ */
.dot {
  width: 24rpx;
  height: 24rpx;
  border-radius: 50%;
  border: 6rpx solid #fff;
  z-index: 2;
  transition: all 0.3s ease;
}

.couple-dot {
  background: #ff6b81;
  /* å¢åŠ å¤šå±‚å…‰æ™•å’Œè½»å¾®çš„å‘¼å¸åŠ¨ç”» */
  box-shadow: 0 0 0 4rpx #ffcad4, 0 0 12rpx rgba(255, 107, 129, 0.3);
  animation: dotPulse 3s infinite ease-in-out;
}

.single-dot {
  background: #cfd8dc; /* ä½¿ç”¨æ›´æŸ”å’Œçš„æš–ç°è‰² */
  box-shadow: 0 0 0 4rpx #eceff1;
  opacity: 0.9;
}

@keyframes dotPulse {
  0%, 100% { box-shadow: 0 0 0 4rpx #ffcad4, 0 0 8rpx rgba(255, 107, 129, 0.3); }
  50% { box-shadow: 0 0 0 6rpx #ffcad4, 0 0 16rpx rgba(255, 107, 129, 0.5); }
}

.line {
  width: 4rpx;
  flex: 1;
  background: #e0e0e0;
  margin-top: 12rpx;
  min-height: 100rpx;
  border-radius: 4rpx;
}

.timeline-item:last-child .line {
  display: none;
}

/* === å¡ç‰‡æ ·å¼ === */
.memory-card {
  flex: 1;
  background: #fff;
  border-radius: 24rpx;
  padding: 28rpx;
  box-shadow: 
    0 4rpx 10rpx rgba(149, 157, 165, 0.05),
    0 10rpx 25rpx rgba(149, 157, 165, 0.08);
  overflow: hidden;
  transition: all 0.3s ease;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
}

.header-left {
  display: flex;
  align-items: center;
}

/* ğŸ—‘ï¸ [å·²åˆ é™¤] user-tag æ ·å¼ */

.mine-card .user-tag {
  background: linear-gradient(to right, #5d4037, #795548);
  color: #fff;
  box-shadow: 0 4rpx 8rpx rgba(93, 64, 55, 0.2);
}

.partner-card {
  background: #fffdfd;
  border: 2rpx solid rgba(255, 228, 232, 0.8);
}

.partner-card .user-tag {
  background: linear-gradient(to right, #ff6b81, #ff8fa3);
  color: #fff;
  box-shadow: 0 4rpx 8rpx rgba(255, 107, 129, 0.2);
}

/* ğŸŸ¢ [ä¼˜åŒ–] æ—¶æœŸæ ‡ç­¾æ ·å¼ï¼Œæ›´å¯çˆ± */
.era-tag {
  font-size: 22rpx; /* æ¢å¤ä¸º 22rpx */
  font-weight: 700;
  padding: 6rpx 16rpx;
  border-radius: 24rpx;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1; 
  letter-spacing: 1rpx;
  margin-left: 0; /* æ ‡é¢˜æ ç°åœ¨åªæœ‰è¿™ä¸€ä¸ªæ ‡ç­¾ï¼Œä¸éœ€è¦å·¦è¾¹è·äº† */
  box-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.05);
}

/* äºŒäººä¸–ç•Œ - ç”œèœœç²‰è‰²ç³» */
.era-couple {
  background: linear-gradient(135deg, #ff9a9e 0%, #ff6b81 100%);
  color: #ffffff;
  border: 2rpx solid rgba(255, 255, 255, 0.6); 
  box-shadow: 0 4rpx 10rpx rgba(255, 107, 129, 0.25);
}

/* å•èº«æ—¶å…‰ - å¤å¤æš–ç°ç³» */
.era-single {
  background: #f0f2f5; 
  color: #90a4ae; 
  border: 1rpx solid #e0e0e0;
}

.card-date {
  font-size: 24rpx;
  color: #bcaaa4;
  font-family: 'Courier New', monospace;
  font-weight: 600;
}

/* ğŸŸ¢ [ä¼˜åŒ–] ç»‘å®šäº‹ä»¶å¡ç‰‡ï¼Œèå…¥æ•´ä½“æ¸©é¦¨é£æ ¼ */
.bind-event-card {
  background: linear-gradient(135deg, #fff6f0, #ffe0e6);
  border-radius: 20rpx;
  padding: 24rpx;
  margin-bottom: 24rpx;
  display: flex;
  align-items: center;
  color: #d81b60;
  box-shadow: 0 4rpx 12rpx rgba(255, 183, 178, 0.2);
  border: 2rpx dashed #ffcdd2;
}

.bind-icon {
  font-size: 36rpx;
  margin-right: 16rpx;
  animation: bounce 2s infinite ease-in-out;
}

.bind-text {
  font-size: 26rpx;
  font-weight: bold;
  letter-spacing: 1rpx;
}

/* Swiper æ ·å¼ */
.photo-swiper {
  width: 100%;
  height: 440rpx;
  margin-bottom: 12rpx;
  border-radius: 12rpx;
  overflow: hidden;
}

.photo-wrapper {
  position: relative;
  width: 100%;
  height: 300rpx;
}

.card-img {
  width: 100%;
  height: 100%;
  border-radius: 12rpx;
  background-color: #f0f0f0;
  object-fit: cover;
  box-shadow: inset 0 0 20rpx rgba(0,0,0,0.05);
}

.card-tag {
  position: absolute;
  bottom: 12rpx;
  right: 12rpx;
  background: rgba(255, 255, 255, 0.92);
  font-size: 20rpx;
  color: #78909c;
  padding: 6rpx 14rpx;
  border-radius: 24rpx;
  box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.08);
  font-weight: 600;
  backdrop-filter: blur(4px);
}

.score-badge {
  position: absolute;
  top: 12rpx;
  right: 12rpx;
  background: linear-gradient(145deg, #ffffff, #fff0f0);
  border: 3rpx solid #ff6b81;
  border-radius: 50%;
  width: 68rpx;
  height: 68rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transform: rotate(15deg);
  box-shadow: 0 6rpx 12rpx rgba(255, 107, 129, 0.25);
  line-height: 1;
  z-index: 10;
}

.score-num {
  font-size: 28rpx;
  font-weight: 900;
  color: #ff6b81;
}

.score-unit {
  font-size: 16rpx;
  color: #ffb7b2;
  margin-top: -4rpx;
}

.ai-comment-box {
  margin-top: 20rpx;
  background: #fff9f9; 
  padding: 16rpx 24rpx;
  border-radius: 12rpx;
  font-size: 24rpx;
  color: #6d4c41;
  line-height: 1.5;
  border: none;
  border-left: 6rpx solid #ffb74d;
  text-align: left;
  box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.03);
}

.ai-prefix {
  font-weight: 800;
  color: #ff9800;
  margin-right: 8rpx;
}

.empty-state {
  text-align: center;
  color: #b0a4a4;
  margin-top: 120rpx;
  font-size: 28rpx;
  padding: 0 40rpx;
  line-height: 1.8;
  font-weight: 500;
}

/* Rules Modal */
.rules-modal-mask {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  z-index: 999;
  display: flex; justify-content: center; align-items: center;
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease;
}

.rules-modal-content {
  width: 600rpx;
  background: #fff;
  border-radius: 30rpx;
  overflow: hidden;
  box-shadow: 0 20rpx 60rpx rgba(0,0,0,0.2);
  animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.rules-header {
  background: #ff6b81;
  color: #fff;
  text-align: center;
  padding: 30rpx 0;
  font-size: 32rpx;
  font-weight: bold;
  letter-spacing: 2rpx;
}

.rules-body {
  padding: 40rpx;
}

.rule-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 30rpx;
}

.rule-icon-emoji {
  font-size: 36rpx;
  margin-right: 20rpx;
  margin-top: 4rpx;
}

.rule-text {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.rule-title {
  font-size: 28rpx;
  font-weight: bold;
  color: #5d4037;
  margin-bottom: 6rpx;
}

.rule-desc {
  font-size: 24rpx;
  color: #8d6e63;
  line-height: 1.5;
}

.btn-know {
  width: 100% !important;
  background: #f5f5f5;
  color: #ff6b81;
  font-weight: bold;
  border-radius: 0;
  padding: 30rpx 0;
  font-size: 30rpx;
  margin: 0 !important;
}
.btn-know::after { border: none; }
.btn-know:active { background: #eeeeee; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes popUp { 
  from { transform: scale(0.9); opacity: 0; } 
  to { transform: scale(1); opacity: 1; } 
}

/* === ğŸŸ¢ [æ–°å¢] ç…§ç‰‡å½’å±äººæ ‡ç­¾ === */
.photo-owner-badge {
  position: absolute;
  top: 20rpx;
  left: 20rpx;
  z-index: 10;
  font-size: 20rpx;
  font-weight: 800;
  padding: 6rpx 14rpx;
  border-radius: 12rpx;
  box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.2);
  letter-spacing: 1rpx;
  line-height: 1;
}

/* è‡ªå·±çš„ç…§ç‰‡æ ·å¼ (æ·±æ£•è‰²) */
.photo-owner-badge.mine {
  background: rgba(93, 64, 55, 0.9);
  color: #fff;
  border: 2rpx solid rgba(255, 255, 255, 0.3);
}

/* ä¼´ä¾£çš„ç…§ç‰‡æ ·å¼ (ç²‰è‰²) */
.photo-owner-badge.partner {
  background: rgba(255, 107, 129, 0.9);
  color: #fff;
  border: 2rpx solid rgba(255, 255, 255, 0.3);
}